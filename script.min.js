document.addEventListener("DOMContentLoaded",(function(){const display=document.getElementById("display"),buttons=document.querySelectorAll(".buttons button");buttons.forEach((button=>{button.addEventListener("click",(function(){let value=this.innerText,lastChar=display.value.slice(-1);if("C"===value)display.value="";else if("⌫"===value)display.value=display.value.slice(0,-1);else if("="===value)try{let expression=display.value.replace(/×/g,"*").replace(/÷/g,"/").replace(/\^/g,"**").replace(/π/g,"Math.PI").replace(/e/g,"Math.E").replace(/√(\d+)/g,"Math.sqrt($1)").replace(/sin\(/g,"Math.sin((Math.PI/180)*").replace(/cos\(/g,"Math.cos((Math.PI/180)*").replace(/tan\(/g,"Math.tan((Math.PI/180)*").replace(/log/g,"Math.log10").replace(/ln/g,"Math.log");display.value=eval(expression)}catch(e){display.value="Error"}else{if("+-×÷".includes(value)&&"+-×÷".includes(lastChar))return;let e=display.value.split(/[\+\-×÷]/),l=e[e.length-1];if("."===value&&l.includes("."))return;display.value+=value}}))})),document.addEventListener("keydown",(function(e){let l=e.key;"0123456789+-*/().".includes(l)?display.value+=l.replace("*","×").replace("/","÷"):"Enter"===l?(e.preventDefault(),document.querySelector(".equals").click()):"Backspace"===l?document.querySelector(".backspace").click():e.preventDefault()}))}));